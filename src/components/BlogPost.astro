---
// components
import Tag from "@components/Tag.astro";

// styles
import BlogPostStyles from "@styles/components/BlogPost.module.scss";
import { formatDate } from "@utils/dateFormat";

export interface Props {
  title: string;
  publishDate: string;
  heroImage: string;
  alt: string;
  tags: string[];
}

const { title, publishDate, heroImage, alt, tags } = Astro.props;

const prettyPublishDate = formatDate(publishDate);
---

<article class="content">
  <div>
    <header class={BlogPostStyles.header}>
      <h1 class={BlogPostStyles.title}>{title}</h1>

      <div class={BlogPostStyles["metadata-row"]}>
        <small class={BlogPostStyles["publish-date"]}>
          Posted on {prettyPublishDate}
        </small>

        {
          tags?.length && (
            <ul class={BlogPostStyles.tags}>
              {tags.map((tag) => (
                <>
                  <Tag>#{tag}</Tag>
                </>
              ))}
            </ul>
          )
        }
      </div>

      {
        heroImage && (
          <img
            width="720"
            height="420"
            class="hero-image"
            loading="lazy"
            src={heroImage}
            alt={alt}
          />
        )
      }
    </header>

    <main>
      <slot />
    </main>
  </div>
</article>
